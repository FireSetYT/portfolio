# =======================================================
# netlify.toml - КОНФІГУРАЦІЯ ДЛЯ NETLIFY FUNCTIONS
# =======================================================

# 1. Налаштування збірки
[build]
  # Папка, яку Netlify має обслуговувати (фронтенд)
  publish = "public"
  # Команда збірки (згенерувати CSS та встановити залежності)
  command = "npm install && npm run sass:build" 
  # Або просто "npm install", якщо збірка SCSS вже налаштована

# 2. Налаштування функцій
[functions]
  # Папка, де Netlify знайде ваш Express-сервер (app.js)
  directory = "netlify/functions"
  # Використовуємо esbuild для швидкої збірки
  node_bundler = "esbuild"

# 3. Правила перенаправлення (Redirects)
# Усі запити, що починаються з /api, перенаправляємо на Serverless Function
# Це те, що змусить /api/login працювати.
[[redirects]]
  from = "/api/*"
  to = "/.netlify/functions/app/:splat" # 'app' відповідає назві файлу app.js
  status = 200